---
layout: default
title: 图片展示
---

<style>
  .gallery {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 20px;
    padding: 100px 20px;
  }

  .gallery-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    border: 1px solid #eee;
    padding: 10px;
    border-radius: 5px;
    background: #f9f9f9;
    aspect-ratio: 16/9;
  }

  .gallery-item img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 3px;
    margin-bottom: 10px;
  }

  .filepath {
    font-size: 14px;
    color: #555;
    word-break: break-all;
    text-align: center;
  }
</style>

<select id="folder-select">
  <option value="">所有文件夹</option>
</select>

<div class="gallery">
  {% assign image_files = site.static_files | where_exp: 'file', 'file.path contains "/assets/images/"' %}
  {% assign sorted_images = image_files | sort: 'modified_time' | reverse %}

  {% for image in sorted_images %}
    {% assign parts = image.path | split: '/' %}
    {% assign foldername = parts[-2] %}
    {% assign filename = parts[-1] %}
    <div class="gallery-item" data-folder="{{ foldername }}">
      <img
        src="{{ image.path | relative_url }}"
        alt="{{ filename }}"
        loading="lazy"
      >
      <div class="filepath">{{ foldername }}/{{ filename }}</div>
    </div>
  {% endfor %}
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // DOM 元素
    const galleryItems = document.querySelectorAll('.gallery .gallery-item');
    const folderSelect = document.getElementById('folder-select');

    // 填充文件夹下拉菜单选项
    function populateFolderOptions() {
      const folders = new Set();

      galleryItems.forEach(item => {
        folders.add(item.dataset.folder);
      });

      folders.forEach(folder => {
        folderSelect.add(new Option(folder, folder));
      });
    }

    // 更新文件夹筛选函数
    function updateFolderFilters() {
      const selectedFolder = folderSelect.value;

      galleryItems.forEach(item => {
        const itemFolder = item.dataset.folder;

        const showFolder = !selectedFolder || itemFolder === selectedFolder;

        item.style.display = showFolder ? 'block' : 'none';
      });
    }

    // 绑定文件夹选择事件
    folderSelect.addEventListener('change', updateFolderFilters);

    // 初始填充文件夹下拉菜单和筛选
    populateFolderOptions();
    updateFolderFilters();
  });
</script>
